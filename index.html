<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <title>UMNGotcha</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <nav class="navbar container-fluid">
      <div class="container justify-content-center">
        <a href="index.html">
          <img src="images/Logo1.png" alt="Logo UMNGotcha" />
        </a>
      </div>
    </nav>

    <nav class="navbar container-fluid">
      <div class="container justify-content-center">
        <h6 id="app-name" style="text-align: center">UMNGotcha</h6>
      </div>
    </nav>

    <!-- Tampilan awal -->
    <div id="page-content">
      <h4 id="header" style="text-align: center">Choose Your Pet Avatar</h4>

      <div id="avatar-carousel" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <img
              id="avatar-1"
              src="Images/KucingDefault.png"
              alt="Avatar 1"
              class="d-block mx-auto"
            />
          </div>
          <div class="carousel-item">
            <img
              id="avatar-2"
              src="Images/MonyetDefault.png"
              alt="Avatar 2"
              class="d-block mx-auto"
            />
          </div>
          <div class="carousel-item">
            <img
              id="avatar-3"
              src="Images/SerigalaDefault.png"
              alt="Avatar 3"
              class="d-block mx-auto"
            />
          </div>
          <div class="carousel-item">
            <img
              id="avatar-4"
              src="Images/BeruangDefault.png"
              alt="Avatar 4"
              class="d-block mx-auto"
            />
          </div>
        </div>
        <div class="arrow">
          <a
            class="carousel-control-prev"
            href="#avatar-carousel"
            role="button"
            data-slide="prev"
          >
            <img
              src="images/arrow1.png"
              alt="Previous"
              class="carousel-arrow"
            />
          </a>
          <a
            class="carousel-control-next"
            href="#avatar-carousel"
            role="button"
            data-slide="next"
          >
            <img src="images/arrow2.png" alt="Next" class="carousel-arrow" />
          </a>
        </div>
      </div>

      <div id="name" class="mt-lg-5 mt-3">
        <div class="text text-center">
          <p>Enter pet name here..</p>
        </div>
        <div class="input-name mt-4">
          <input class="name-field" type="text" />
        </div>
        <button type="submit" class="btn-play px-5 py-1" onclick="playGame()">
          PLAY
        </button>
      </div>

      <!-- Tampilan selanjutnya -->
      <div id="game-content" style="display: none">
        <div id="pet-avatar" class="text-center mt-lg-5 mt-3">
          <img
            id="selected-avatar"
            src="Images/KucingDefault.png"
            alt="Selected Avatar"
            class="mx-auto"
          />
          <h4 id="pet-name"></h4>
          <p id="greeting"></p>
          <div id="status-bar" class="mt-lg-5 mt-3">
            <div class="row justify-content-around">
              <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="status-item">
                  <p>Eat</p>
                  <div class="progress">
                    <div
                      id="eat-bar"
                      class="progress-bar bg-success"
                      role="progressbar"
                      style="width: 100%"
                    ></div>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="status-item">
                  <p>Sleep</p>
                  <div class="progress">
                    <div
                      id="sleep-bar"
                      class="progress-bar bg-info"
                      role="progressbar"
                      style="width: 100%"
                    ></div>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="status-item">
                  <p>Game</p>
                  <div class="progress">
                    <div
                      id="game-bar"
                      class="progress-bar bg-warning"
                      role="progressbar"
                      style="width: 100%"
                    ></div>
                  </div>
                </div>
              </div>
              <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="status-item">
                  <p>Health</p>
                  <div class="progress">
                    <div
                      id="health-bar"
                      class="progress-bar bg-danger"
                      role="progressbar"
                      style="width: 100%"
                    ></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div id="action-buttons" class="text-center mt-lg-5 mt-3">
            <div class="row justify-content-around">
              <div class="col-lg-3 col-md-6 col-sm-6 mb-3">
                <button class="btn-action" onclick="eat()">Makan</button>
              </div>
              <div class="col-lg-3 col-md-6 col-sm-6 mb-3">
                <button class="btn-action" onclick="sleep()">Sleep</button>
              </div>
              <div class="col-lg-3 col-md-6 col-sm-6 mb-3">
                <button class="btn-action" onclick="play()">Main</button>
              </div>
              <div class="col-lg-3 col-md-6 col-sm-6 mb-3">
                <button class="btn-action" onclick="medicine()">Obat</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
      crossorigin="anonymous"
    ></script>
    <script>
      let petName = "";
      let selectedAvatar = "";
      var eatBar = document.getElementById("eat-bar");
      var sleepBar = document.getElementById("sleep-bar");
      var gameBar = document.getElementById("game-bar");
      var healthBar = document.getElementById("health-bar");

      function updateStatusBar() {
        setInterval(() => {
          eatBar -= 1;
          sleepBar -= 1;
          gameBar -= 1;
          healthBar -= 1;

          document.getElementById("eat-bar").style.width = `${eatBar}%`;
          document.getElementById("sleep-bar").style.width = `${sleepBar}%`;
          document.getElementById("game-bar").style.width = `${gameBar}%`;
          document.getElementById("health-bar").style.width = `${healthBar}%`;
        }, 1000);
      }

      function eat() {
        if (eatBar <= 90) {
          eatBar += 10;
        } else {
          eatBar = 100;
        }
        updateStatusBar();
      }

      function sleep() {
        if (sleepBar <= 90) {
          sleepBar += 10;
        } else {
          sleepBar = 100;
        }
        updateStatusBar();
      }

      function play() {
        if (gameBar <= 90) {
          gameBar += 10;
        } else {
          gameBar = 100;
        }
        updateStatusBar();
      }

      function medicine() {
        if (healthBar <= 90) {
          healthBar += 10;
        } else {
          healthBar = 100;
        }
        updateStatusBar();
      }

      function updateSelectedAvatar() {
        const avatarId = localStorage.getItem("selectedAvatarId");
        const avatarSrc = document.getElementById(avatarId).getAttribute("src");
        const selectedAvatar = document.getElementById("selected-avatar");
        selectedAvatar.setAttribute("src", avatarSrc);
      }

      function clearPageContent() {
        const pageContent = document.getElementById("page-content");
        pageContent.style.display = "none";
        const gameContent = document.getElementById("game-content");
        gameContent.style.display = "block";
      }

      function startGame() {
        const petName = localStorage.getItem("petName");
        const selectedAvatarSrc = document
          .getElementById("selected-avatar")
          .getAttribute("src");

        document.getElementById("pet-name").innerHTML = `${petName}`;
        document
          .getElementById("selected-avatar")
          .setAttribute("src", selectedAvatarSrc);

        updateStatusBar();
      }

      function playGame() {
        const nameField = document.querySelector(".name-field");
        petName = nameField.value;
        selectedAvatar = document.querySelector(
          ".carousel-item.active img"
        ).src;

        localStorage.setItem("petName", petName);
        const selectedAvatarId = document.querySelector(
          ".carousel-item.active img"
        ).id;
        localStorage.setItem("selectedAvatarId", selectedAvatarId);

        clearPageContent();
        updateSelectedAvatar();
        startGame();
      }
    </script>
  </body>
</html>
